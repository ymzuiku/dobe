var T=Object.defineProperty,p=Object.defineProperties,A=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var m=(t,e,r)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d=(t,e)=>{for(var r in e||(e={}))y.call(e,r)&&m(t,r,e[r]);if(h)for(var r of h(e))E.call(e,r)&&m(t,r,e[r]);return t},O=(t,e)=>p(t,C(e));var L=(t,e)=>{for(var r in e)T(t,r,{get:e[r],enumerable:!0})},x=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of R(e))!y.call(t,o)&&o!==r&&T(t,o,{get:()=>e[o],enumerable:!(n=A(e,o))||n.enumerable});return t};var q=t=>x(T({},"__esModule",{value:!0}),t);var P=(t,e,r)=>new Promise((n,o)=>{var u=s=>{try{l(r.next(s))}catch(c){o(c)}},a=s=>{try{l(r.throw(s))}catch(c){o(c)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(u,a);l((r=r.apply(t,e)).next())});var N={};L(N,{createFastifyController:()=>b,dobe:()=>i,fetcher:()=>f,sokeDtoValidate:()=>I});module.exports=q(N);var b=t=>(e,r)=>(e.method==="GET"?t.get(e.url,n=>e(n.query,r)):t[e.method.toLocaleLowerCase()](e.url,n=>e(JSON.parse(n.body),r)),r);function w(t){let e=t.status;return e>=200&&e<=299?t.json():t.json().then(r=>{throw typeof r=="object"?r.message?new Error(r.message):r:new Error(r)})}var f=(t,e,r)=>{let n=d({method:e.method},r);if(e.method==="GET"){let o=new URLSearchParams(t).toString();return fetch(f.baseURL+e.url+"?"+o,n).then(w)}return fetch(f.baseURL+e.url,O(d({},n),{body:JSON.stringify(t)})).then(w)};f.baseURL="";var D=({method:t,requestSchema:e,responseSchema:r,url:n})=>{let o=(u,a,l)=>P(void 0,null,function*(){if(a=a||i.baseFetcher,!a)throw new Error("Not found fetcher: "+o.url);e&&(u=i.baseDtoValidate(e,u));let s=yield a(u,o,l);return r?i.baseDtoValidate(r,s):s});return o.requestSchema=e,o.responseSchema=r,o.url=n,o.method=t,o.TypeOfRequest={},o.TypeOfResponse={},o},F=(t,e,r)=>{if(r=r||i.baseController,!r)throw new Error("Not found controller: "+t.url);return r(t,e)},I=(t,e)=>t.dto(e),i={api:D,use:F,baseDtoValidate:I,baseFetcher:f,baseController:void 0};
